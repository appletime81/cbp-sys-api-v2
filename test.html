<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
        <html>
        <head>
        <meta charset="UTF-8">
        <title>Download File from FastAPI Server</title>
</head>
<body>
<button onclick="downloadFile()">Download File</button>

<script>
    function downloadFile() {
        fetch('http://127.0.0.1:8000/api/v1/getBillMasterDraftStream', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                BillMasterID: 1,
                UserID: 'chang_ty',
                IssueDate: '2023/04/01',
                DueDate: '2023/04/30',
                WorkTitle: 'Construction #11',
                InvoiceName: '',
                SubmarineCable: 'SJC2',
                logo: 2
            })
        })
            .then(response => {
                const contentDisposition = response.headers.get('content-disposition');
                const filename = contentDisposition ? contentDisposition.split('filename=')[1].trim().replace(/"/g, '') : 'file.docx';
                console.log(filename);
                return response.blob();
            })
            .then(blob => {
                const link = document.createElement('a');
                link.href = window.URL.createObjectURL(blob);
                link.download = "test.docx";
                link.click();
            })
            .catch(error => {
                console.error(error);
            });
    }
</script>
</body>
</html></title>
</head>
<body>

</body>
</html>